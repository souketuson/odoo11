<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <template id="assets_backend_weight" name="static_resources_demo assets" inherit_id="web.assets_backend">
            <xpath expr="." position="inside">
                <!--<link href="/yc_root/static/src/css/weight.css" rel="stylesheet"/>-->
                <script type="text/javascript" src="/yc_root/static/src/js/my_js.js"></script>
            </xpath>
        </template>

        <!-- action -->
        <record model="ir.actions.act_window" id="weight_list_action">
            <field name="name">過磅單作業</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">yc.weight</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[("factory_id","=",context.get('factory_id'))]</field>
            <field name="context">{}</field>
        </record>
        <record model="ir.actions.act_window.view" id="weight_list_action_form">
            <field name="act_window_id" ref="weight_list_action"/>
            <field name="sequence" eval="20"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="weight_fom"/>
        </record>
        <record model="ir.actions.act_window.view" id="weight_list_action_tree">
            <field name="act_window_id" ref="weight_list_action"/>
            <field name="sequence" eval="10"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="weight_tree"/>
        </record>

        <!-- getcontext -->
        <record id="weight_filter_act" model="ir.actions.server">
            <field name="name">Whatever</field>
            <field name="model_id" ref="yc_root.weight_list_action_tree"/>
            <field name="state">code</field>
            <field name="code">action = model.vist_action()</field>
        </record>

        <!-- tree view -->
        <record model="ir.ui.view" id="weight_tree">
            <field name="name">weight.tree</field>
            <field name="model">yc.weight</field>
            <field name="arch" type="xml">
                <tree string="Weight Tree">
                    <field name="name"/>
                    <field name="day"/>
                    <field name="weightime"/>
                    <field name="driver_id"/>
                    <field name="person_id"/>
                    <field name="carno"/>
                    <field name="in_out"/>
                    <field name="factory_id"/>
                </tree>
            </field>
        </record>
        <!-- form view -->
        <record model="ir.ui.view" id="weight_fom">
            <field name="name">weight.form</field>
            <field name="model">yc.weight</field>
            <field name="arch" type="xml">
                <form string="Weight form">
                    <sheet>
                        <div style="overflow-x:auto;width:1000px;">
                            <group string="過磅單">
                                <div>
                                    <!--<button string="Test Javascript Onclick Method" custom="click" />-->
                                    <label string="過磅日期" style="font-weight:bold"/>
                                    <field name="day" style="width:120px"/>
                                    <span style="display:inline-block; width:5px;"/>
                                    <label string="過磅時間" style="font-weight:bold"/>
                                    <field name="weightime" style="width:70px"/>
                                    <span style="display:inline-block; width:40px;"/>
                                    <label string="進出貨" style="font-weight:bold"/>
                                    <field class="in_out" name="in_out" attrs="{'readonly': [('id', '!=', False)]}"
                                           widget="radio"
                                           style="width:100px" options="{'horizontal': True}"/>
                                    <span style="display:inline-block; width:40px;"/>
                                    <label string="過磅單號" style="font-weight:bold"/>
                                    <field name="name" readonly="1" style="width:100px"/>
                                    <br/>
                                    <label string="司機名稱" style="font-weight:bold"/>
                                    <field name="driver_id" attrs="{'readonly': [('id', '!=', False)]}"
                                           style="width:80px"/>
                                    <span style="display:inline-block; width:45px;"/>
                                    <label string="　過磅員" style="font-weight:bold"/>
                                    <field name="person_id" style="width:70px"/>
                                    <span style="display:inline-block; width:40px;"/>
                                    <label string="進貨次數" style="font-weight:bold"/>
                                    <field name="purchase_times" readonly="1" style="width:50px"/>
                                    <span style="display:inline-block; width:40px;"/>
                                    <label string="出貨次數" style="font-weight:bold"/>
                                    <field name="ship_times" readonly="1" style="width:50px"/>
                                    <br/>
                                    <label string="車次序號" style="font-weight:bold"/>
                                    <field name="carno" attrs="{'readonly': [('id', '!=', False)]}"
                                           style="width:100px"/>
                                    <span style="display:inline-block; width:25px;"/>
                                    <label string="　　車號" style="font-weight:bold"/>
                                    <field name="plate_no" attrs="{'readonly': [('id', '!=', False)]}"
                                           style="width:70px"/>
                                    <span style="display:inline-block; width:40px;"/>
                                    <label string="所屬工廠" style="font-weight:bold"/>
                                    <field name="factory_id" style="width:70px"/>
                                    <br/>
                                    <label string="地磅序號" style="font-weight:bold"/>
                                    <field name="weighbridge" style="width:100px"/>
                                    <span style="display:inline-block; width:25px;"/>
                                    <label string="總重(KG)" style="font-weight:bold"/>
                                    <field name="total" style="width:70px"/>
                                    <span style="display:inline-block; width:5px;"/>
                                    <label string="空車重(KG)" style="font-weight:bold"/>
                                    <field name="curbweight" style="width:70px"/>
                                    <span style="display:inline-block; width:5px;"/>
                                    <label string="空桶重(KG)" style="font-weight:bold"/>
                                    <field name="emptybucket" style="width:70px"/>
                                    <span style="display:inline-block; width:5px;"/>
                                    <label string="淨重(KG)" style="font-weight:bold"/>
                                    <field name="net" attrs="{'readonly': True}" style="width:70px"/>
                                    <br/>
                                    <label string="調質重量(KG)" style="font-weight:bold"/>
                                    <field name="refine" style="width:70px"/>
                                    <span style="display:inline-block; width:5px;"/>
                                    <label string="滲碳重量(KG)" style="font-weight:bold"/>
                                    <field name="carbur" style="width:70px"/>
                                    <span style="display:inline-block; width:5px;"/>
                                    <label string="其他重量(KG)" style="font-weight:bold"/>
                                    <field name="other" style="width:70px"/>
                                    <span style="display:inline-block; width:5px;"/>
                                    <label string="其他重量1(KG)" style="font-weight:bold"/>
                                    <field name="other1" style="width:70px"/>
                                    <br/>
                                </div>
                            </group>
                            <notebook>
                                <page string="項目">
                                    <div>
                                        <field name="customer_detail_ids">
                                            <tree string="Customer Details" editable="bottom">
                                                <field name="no" invisible="1"/>
                                                <field name="customer_code" style="width:100px;"/>
                                                <field name="customer_id"/>
                                                <field name="processing_id"/>
                                                <field name="note"/>
                                            </tree>
                                        </field>
                                    </div>
                                </page>
                            </notebook>
                        </div>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- auto generate number-->
        <!-- 使用ir.sequence 模組，可能問題 1. 兩人同時登入使用，產生單號可能會相同
                                            2. 取消創建會跳號 implement 設no gap一樣-->
        <record id="auto_number_weight" model="ir.sequence">
            <field name="name">Weight List Code</field>
            <field name="code">WeightList.sequence</field>
            <field name="implementation">no_gap</field>
            <field name="prefix">E%(y)s%(month)s%(day)s</field>
            <field name="padding">3</field>
        </record>
        <!-- search -->
        <record model="ir.ui.view" id="weight_search_view">
            <field name="name">weight.search</field>
            <field name="model">yc.weight</field>
            <field name="arch" type="xml">
                <search>
                    <field name="driver_id"/>
                    <field name="carno"/>
                    <field name="day"/>
                </search>
            </field>
        </record>
    </data>
</odoo>